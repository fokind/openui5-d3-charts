sap.ui.define(["./Series","./library","./thirdparty/d3","./thirdparty/moment-with-locales"],function(e){"use strict";return e.extend("openui5.financial.chart.CandlestickChart",{metadata:{aggregations:{items:{type:"openui5.financial.chart.Candle",multiple:true}}},renderer:{},_draw:function(){var t=this;e.prototype._draw.apply(t);var a=t.getParent();var r=a.getAggregation("_timeAxis");var n=r.getStart();var i=r.getEnd();var g=t.getItems().filter(e=>moment(e.getTime()).isBetween(n,i,"m","[]"));var m=r._scale;var l=a.getAggregation("_valueAxis")._scale;var s=d3.select("#"+t.getId());var o=.8;var d=m(moment(moment(n).toDate()).add(+a.getTimeframe(),"m").toDate());var c=s.selectAll().data(g).enter().filter(e=>moment(e.getTime()).isBetween(n,i,"m","[]")).append("g").classed("fcBullish",e=>e.getClose()>=e.getOpen()).classed("fcBearish",e=>e.getClose()<e.getOpen());c.append("line").classed("fcCandleShadow",true).attr("x1",e=>m(moment(e.getTime()).toDate())+d/2).attr("x2",e=>m(moment(e.getTime()).toDate())+d/2).attr("y1",e=>l(e.getHigh())).attr("y2",e=>l(e.getLow()));c.append("rect").classed("fcCandleBody",true).attr("x",e=>m(moment(e.getTime()).toDate())+(1-o)*d/2).attr("y",e=>l(Math.max(e.getOpen(),e.getClose()))).attr("height",e=>Math.max(1,l(Math.min(e.getOpen(),e.getClose()))-l(Math.max(e.getOpen(),e.getClose())))).attr("width",o*d)}})});